@model List<ResumeProjectDemoNight.Entities.Experience>

@functions {
    private int GetYearFromPeriod(string? period)
    {
        if (string.IsNullOrWhiteSpace(period))
            return 0;

        var digits = new string(period.Where(char.IsDigit).ToArray()); // "20242025"

        if (digits.Length >= 4 && int.TryParse(digits.Substring(digits.Length - 4), out int year))
            return year;

        return 0;
    }
}

<section id="experience">
    <div class="container">

        <h2 class="section-title wow fadeInUp">Deneyimlerim</h2>
        <div class="spacer" data-height="60"></div>

        <div class="row">

            <!-- SOL: DB'den Deneyimler -->
            <div class="col-md-6">
                <div class="timeline exp bg-white rounded shadow-dark padding-30 overflow-hidden">

                    @foreach (var item in Model
                                        .OrderByDescending(x => GetYearFromPeriod(x.WorkPeriodDate))
                                        .ThenByDescending(x => x.ExperienceId))
                    {
                        <div class="timeline-container wow fadeInUp">
                            <div class="content">
                                <span class="time">@item.WorkPeriodDate</span>
                                <h3 class="title">@item.CompanyName</h3>
                                <p>
                                    <strong>@item.Title</strong> - @item.Description
                                </p>
                            </div>
                        </div>
                    }

                    <span class="line"></span>
                </div>
            </div>

            <!-- SAĞ: Education (component) -->
            <div class="col-md-6">
                <div class="spacer d-md-none d-lg-none" data-height="30"></div>

                <!-- Component kendi içinde timeline edu üretiyor olmalı -->
                @await Component.InvokeAsync("_DefaultEducationComponentPartial")
            </div>

        </div>
    </div>
</section>
